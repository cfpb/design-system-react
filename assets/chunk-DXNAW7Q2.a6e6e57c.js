import{s as h}from"./index.e850844b.js";import{N as f}from"./index.ae84c53b.js";var O="links";const{makeDecorator:L,addons:l}=__STORYBOOK_MODULE_PREVIEW_API__,{STORY_CHANGED:k,SELECT_STORY:R}=__STORYBOOK_MODULE_CORE_EVENTS__;var{document:o,HTMLElement:T}=h;function u(e){let n={},a=(e[0]==="?"?e.substring(1):e).split("&").filter(Boolean);for(let t=0;t<a.length;t++){let r=a[t].split("=");n[decodeURIComponent(r[0])]=decodeURIComponent(r[1]||"")}return n}var v=e=>l.getChannel().emit(R,e),w=(e,n)=>new Promise(a=>{let{location:t}=o,r=u(t.search),p=[].concat(r.id)[0],m=e||p.split("--",2)[0],_=`/story/${f(m,n)}`,d=t.pathname.replace(/iframe\.html$/,""),E=`${t.origin+d}?${Object.entries({path:_}).map(s=>`${s[0]}=${s[1]}`).join("&")}`;a(E)}),c=e=>{let{target:n}=e;if(!(n instanceof T))return;let a=n,{sbKind:t,sbStory:r}=a.dataset;(t||r)&&(e.preventDefault(),v({kind:t,story:r}))},i=!1,C=()=>{i||(i=!0,o.addEventListener("click",c))},g=()=>{i&&(i=!1,o.removeEventListener("click",c))},D=L({name:"withLinks",parameterName:O,wrapper:(e,n)=>(C(),l.getChannel().once(k,g),e(n))});export{w as h,v as n,D as w};
//# sourceMappingURL=chunk-DXNAW7Q2.a6e6e57c.js.map
