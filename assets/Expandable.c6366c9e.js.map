{"version":3,"file":"Expandable.c6366c9e.js","sources":["../../node_modules/@cfpb/cfpb-expandables/node_modules/@cfpb/cfpb-atomic-component/src/utilities/standard-type.js","../../node_modules/@cfpb/cfpb-expandables/node_modules/@cfpb/cfpb-atomic-component/src/mixins/EventObserver.js","../../node_modules/@cfpb/cfpb-expandables/node_modules/@cfpb/cfpb-atomic-component/src/utilities/data-hook.js","../../node_modules/@cfpb/cfpb-expandables/node_modules/@cfpb/cfpb-atomic-component/src/utilities/atomic-helpers.js","../../node_modules/@cfpb/cfpb-expandables/node_modules/@cfpb/cfpb-atomic-component/src/utilities/behavior/behavior.js","../../node_modules/@cfpb/cfpb-expandables/node_modules/@cfpb/cfpb-atomic-component/src/utilities/behavior/FlyoutMenu.js","../../node_modules/@cfpb/cfpb-expandables/node_modules/@cfpb/cfpb-atomic-component/src/utilities/transition/BaseTransition.js","../../node_modules/@cfpb/cfpb-expandables/node_modules/@cfpb/cfpb-atomic-component/src/utilities/transition/MaxHeightTransition.js","../../node_modules/@cfpb/cfpb-expandables/src/Expandable.js"],"sourcesContent":["/**\n * @constant\n * @type {string}\n * @description\n * Constant for the name of the data-* attribute set on\n * HTML DOM elements for access by JavaScript.\n */\nconst JS_HOOK = 'data-js-hook';\n\n/**\n * @constant\n * @type {string}\n * @description\n * Flag prefix for settings that describe what JavaScript\n * behaviors should be attached to a component.\n * This would be set in the markup and initialized when\n * the JavaScript loads.\n * @example\n * A component may flag that it has certain JavaScript behaviors attached,\n * such as:\n * `data-js-hook=\"behavior_flyout-menu behavior_clearable-input\"`,\n * which defines that two scripts (FlyoutMenu) and (ClearableInput)\n * should access this DOM element and initialize its behaviors.\n */\nconst BEHAVIOR_PREFIX = 'behavior_';\n\n/**\n * @constant\n * @type {string}\n * @description\n * Flag prefix for settings related to changes in a components\n * state set in the data-* JavaScript hook.\n * @example\n * A component may flag that it has been initialized by setting\n * `data-js-hook=\"state_atomic_init\"` after page load.\n * Which specifies that the init method of a atomic constructor\n * has been called, such as\n * `var globalSearch = new GlobalSearch( 'm-global-search' ).init()`.\n */\nconst STATE_PREFIX = 'state_';\n\nexport { JS_HOOK, BEHAVIOR_PREFIX, STATE_PREFIX };\n","/**\n * EventObserver\n * @class\n * @classdesc Used for creating an object\n *   that can be used to dispatch and listen to custom events.\n * @returns {object} An EventObserver instance.\n */\nfunction EventObserver() {\n  // The events registered on this instance.\n  const _events = {};\n\n  /**\n   * Register an event listener.\n   * @param {string} event - The event name to listen for.\n   * @param {Function} callback - The function called when the event has fired.\n   * @returns {object} The instance this EventObserver instance is decorating.\n   */\n  function addEventListener(event, callback) {\n    if ({}.hasOwnProperty.call(_events, event)) {\n      _events[event].push(callback);\n    } else {\n      _events[event] = [callback];\n    }\n\n    return this;\n  }\n\n  /**\n   * Remove an added event listener.\n   * Must match a call made to addEventListener.\n   * @param {string} event - The event name to remove.\n   * @param {Function} callback - The function attached to the event.\n   * @returns {object} The instance this EventObserver instance is decorating.\n   */\n  function removeEventListener(event, callback) {\n    if (!{}.hasOwnProperty.call(_events, event)) {\n      return this;\n    }\n\n    const index = _events[event].indexOf(callback);\n    // Check if there are any callbacks associated with a particular event.\n    if (index !== -1) {\n      _events[event].splice(index, 1);\n    }\n\n    return this;\n  }\n\n  /**\n   * Broadcast an event.\n   * @param {string} event - The type of event to broadcast.\n   * @param {object} options - The event object to pass to the event handler.\n   * @returns {object} The instance this EventObserver instance is decorating.\n   */\n  function dispatchEvent(event, options) {\n    if (!{}.hasOwnProperty.call(_events, event)) {\n      return this;\n    }\n\n    options = options || {};\n\n    const evts = _events[event];\n    for (let i = 0, len = evts.length; i < len; i++) {\n      evts[i].call(this, options);\n    }\n\n    return this;\n  }\n\n  this.addEventListener = addEventListener;\n  this.removeEventListener = removeEventListener;\n  this.dispatchEvent = dispatchEvent;\n  this.getRegisteredEvents = () => _events;\n\n  return this;\n}\n\nexport { EventObserver };\n","import { JS_HOOK } from './standard-type.js';\n\n/**\n * @param {HTMLElement} element - DOM element.\n * @param {string} value - Value to check as existing as a JS data-* hook value.\n * @returns {boolean} True if the data-* hook value exists, false otherwise.\n */\nfunction contains(element, value) {\n  if (!element) {\n    return false;\n  }\n  let values = element.getAttribute(JS_HOOK);\n  // If JS data-* hook is not set return immediately.\n  if (!values) {\n    return false;\n  }\n  values = values.split(' ');\n\n  return values.indexOf(value) > -1 ? true : false;\n}\n\n/**\n * @param {HTMLElement} element - DOM element.\n * @param {string} value - Value to add to the element's JS data-* hook.\n * @returns {string} The value that was added.\n * @throws {Error} If supplied value contains a space,\n *   meaning it would be two values, which is likely a typo.\n */\nfunction add(element, value) {\n  if (contains(element, value)) return value;\n\n  if (value.indexOf(' ') !== -1) {\n    const msg = JS_HOOK + ' values cannot contain spaces!';\n    throw new Error(msg);\n  }\n\n  const values = element.getAttribute(JS_HOOK);\n  if (values !== null) {\n    value = values + ' ' + value;\n  }\n  element.setAttribute(JS_HOOK, value);\n\n  return value;\n}\n\nexport { add, contains };\n","/* ==========================================================================\n   Atomic Helpers.\n   Utilities for helping validate atomic design element architecture.\n   In descending order of scope, atomic components are:\n   - Page\n   - Template\n   - Organism\n   - Molecule\n   - Atom\n   ========================================================================= */\n\nimport { add, contains } from './data-hook.js';\nimport { STATE_PREFIX } from './standard-type.js';\n\n/**\n * @constant\n * @type {string}\n * @description\n * Flag that gets set on an atomic component after its .init()\n * method has been called. This is used so that an atomic\n * component won't get initialized a second time after it\n * has already been initialized.\n */\nconst INIT_FLAG = STATE_PREFIX + 'atomic_init';\n\n/**\n * @param {HTMLElement} element - The DOM element within which to search for\n *   the atomic element class.\n * @param {string} baseClass - The CSS class name for the atomic element.\n * @returns {HTMLElement} The DOM element for the atomic element.\n * @throws {Error} If DOM element passed into the atomic element is not valid.\n */\nfunction _verifyElementExists(element, baseClass) {\n  if (!element || !element.classList) {\n    const msg =\n      element +\n      ' is not valid. ' +\n      'Check that element is a DOM node with class \"' +\n      baseClass +\n      '\"';\n    throw new Error(msg);\n  }\n\n  return element;\n}\n\n/**\n * @param {HTMLElement} element - The DOM element within which to search\n *   for the atomic element class.\n * @param {string} baseClass - The CSS class name for the atomic element.\n * @returns {HTMLElement} The DOM element for the atomic element.\n * @throws {Error} If baseClass was not found on the element.\n */\nfunction _verifyClassExists(element, baseClass) {\n  const dom = element.classList.contains(baseClass)\n    ? element\n    : element.querySelector('.' + baseClass);\n  if (!dom) {\n    const msg = baseClass + ' not found on or in passed DOM node.';\n    throw new Error(msg);\n  }\n\n  return dom;\n}\n\n/**\n * Check that a particular element passed into the constructor of\n * an atomic component exists and that the correct atomic class\n * is present on the element.\n * @param {HTMLElement} element - The DOM element within which to search\n *   for the atomic element class.\n * @param {string} baseClass - The CSS class name for the atomic element.\n * @returns {HTMLElement} The DOM element for the atomic element.\n * @throws {Error} If DOM element passed into the atomic element is not valid.\n */\nfunction checkDom(element, baseClass) {\n  _verifyElementExists(element, baseClass);\n  const dom = _verifyClassExists(element, baseClass);\n\n  return dom;\n}\n\n/**\n * Set a flag on an atomic component when it is initialized.\n * Use the returned boolean to handle cases where an atomic component\n * is initializing when it has already been initialized elsewhere.\n * @param {HTMLElement} element - The DOM element for the atomic component.\n * @returns {boolean} True if the init data-js-* hook attribute was set,\n *   false otherwise.\n */\nfunction setInitFlag(element) {\n  if (contains(element, INIT_FLAG)) {\n    return false;\n  }\n\n  add(element, INIT_FLAG);\n\n  return true;\n}\n\n/**\n * @param {string} selector - Selector to search for in the document.\n * @param {Function} Constructor - A constructor function.\n * @param {HTMLElement} [scope] - A dom node in which to query the selector.\n *   If not supplied, it defaults to the `document`.\n * @returns {Array} List of instances that were instantiated.\n */\nfunction instantiateAll(selector, Constructor, scope) {\n  const base = scope || document;\n  const elements = base.querySelectorAll(selector);\n  const insts = [];\n  let inst;\n  let element;\n  for (let i = 0, len = elements.length; i < len; i++) {\n    element = elements[i];\n    if (contains(element, INIT_FLAG) === false) {\n      inst = new Constructor(element);\n      inst.init();\n      insts.push(inst);\n    }\n  }\n  return insts;\n}\n\n// Expose public methods.\nexport { checkDom, instantiateAll, setInitFlag };\n","/* ==========================================================================\n   Dom Behaviors\n   Behaviors are functionality that can be shared between different pieces\n   of markup. They are not strictly atomic, though they likely are used\n   on atomic components. An example of shared behavior may be a menu that\n   expands and collapses and sets the aria-expanded attribute on the HTML.\n   Or an input field that can be cleared by clicking an (x) button in the\n   input. These are both behaviors that may appear in different parts of\n   the codebase, but could share the same functionality.\n   Behaviors are added through the `data-js-hook` attribute on the HTML\n   and have a prefix of `behavior_`\n   (both those designators are set in modules/util/standard-type.js).\n   For example, `behaviors/FlyoutMenu.js` defines the behavior of\n   expanding and collapsing an expandable menu. At a minimum, three things\n   need to be defined: (A) The containing scope of the menu, (B) the trigger\n   to activate the menu, and (C) the content to show/hide when the trigger\n   is clicked. So the markup looks something like:\n   <div data-js-hook=\"behavior_flyout-menu\">\n     <button data-js-hook=\"behavior_flyout-menu_trigger\">\n     <div data-js-hook=\"behavior_flyout-menu_content\">…</div>\n   </div>\n   ========================================================================== */\n\nimport {\n  BEHAVIOR_PREFIX,\n  JS_HOOK,\n  contains,\n} from '@cfpb/cfpb-atomic-component';\n\n/**\n * @param {string} behaviorSelector - Behavior type used to find the element\n *   within the dom.\n * @param {HTMLElement} baseElement - Containing element for the behavior element.\n * @returns {Array|NodeList} behaviorElements if it exists in the dom,\n *   null otherwise.\n */\nfunction _findElements(behaviorSelector, baseElement) {\n  baseElement = baseElement || document;\n  let behaviorElements = [];\n\n  try {\n    behaviorElements = baseElement.querySelectorAll(behaviorSelector);\n  } catch (error) {\n    const msg = `${behaviorSelector} not found in DOM! ${error}`;\n    throw new Error(msg);\n  }\n\n  if (\n    behaviorElements.length === 0 &&\n    behaviorSelector.indexOf(BEHAVIOR_PREFIX) === -1\n  ) {\n    // eslint-disable-next-line no-use-before-define\n    behaviorElements = find(behaviorSelector, baseElement);\n  }\n\n  return behaviorElements;\n}\n\n/**\n * @param {( string|HTMLElement|Array|NodeList )} behaviorElement - Used to\n *   query dom for elements.\n * @param {string} event - Event type to add to element.\n * @param {Function} eventHandler - Callback for event.\n * @param {HTMLElement} baseElement - Containing element\n *   for the behavior element.\n * @returns {Array|NodeList} if it exists in the dom, null otherwise.\n */\nfunction attach(behaviorElement, event, eventHandler, baseElement) {\n  let behaviorElements = [];\n\n  if (behaviorElement instanceof NodeList === true) {\n    behaviorElements = behaviorElement;\n  } else if (behaviorElement instanceof Node === true) {\n    behaviorElements = [behaviorElement];\n  } else if (typeof behaviorElement === 'string') {\n    behaviorElements = _findElements(behaviorElement, baseElement);\n  }\n\n  for (let i = 0, len = behaviorElements.length; i < len; i++) {\n    behaviorElements[i].addEventListener(event, eventHandler, false);\n  }\n\n  return behaviorElements;\n}\n\n/**\n * @param {HTMLElement} element - The DOM element within which to search\n *   for the behavior in the data-js-hook attribute.\n * @param {string} behaviorDataAttr - The value in the data-js-hook.\n *   This is the name of the behavior.\n *   E.g. `behavior_flyout-menu`, `behavior_flyout-menu_content`.\n * @returns {HTMLElement} The DOM element that has an attached behavior.\n * @throws {Error} If data-js-hook attribute value was not found on DOM element.\n */\nfunction checkBehaviorDom(element, behaviorDataAttr) {\n  // Check that the behavior is found on the passed DOM node.\n  let dom;\n\n  if (contains(element, behaviorDataAttr)) {\n    dom = element;\n    return dom;\n  }\n\n  /* If the passed DOM node isn't null,\n     query the node to see if it's in the children. */\n  if (element) {\n    const selector = '[' + JS_HOOK + '=' + behaviorDataAttr + ']';\n    dom = element.querySelector(selector);\n  }\n\n  if (!dom) {\n    const msg = behaviorDataAttr + ' behavior not found on passed DOM node!';\n    throw new Error(msg);\n  }\n\n  return dom;\n}\n\n/**\n * @param {string} behaviorSelector - Behavior type used to find\n *   the element within the dom.\n * @param {HTMLElement} baseElement - Containing element\n *   for the behavior element.\n * @returns {NodeList} if it exists in the dom, null otherwise.\n */\nfunction find(behaviorSelector, baseElement) {\n  behaviorSelector = JS_HOOK + '*=' + BEHAVIOR_PREFIX + behaviorSelector;\n  behaviorSelector = '[' + behaviorSelector + ']';\n\n  return _findElements(behaviorSelector, baseElement);\n}\n\n/**\n * @param {HTMLElement} behaviorElement - Element in which to remove the event.\n * @param {string} event - Event type to remove from the element.\n * @param {Function} eventHandler - Callback for event.\n */\nfunction remove(behaviorElement, event, eventHandler) {\n  behaviorElement.removeEventListener(event, eventHandler);\n}\n\n// Expose public methods.\nexport { attach, checkBehaviorDom, find, remove };\n","/* eslint-disable no-use-before-define */\nimport {\n  BEHAVIOR_PREFIX,\n  JS_HOOK,\n  BaseTransition,\n  EventObserver,\n  checkBehaviorDom,\n} from '@cfpb/cfpb-atomic-component';\n\nconst BASE_CLASS = BEHAVIOR_PREFIX + 'flyout-menu';\nconst SEL_PREFIX = '[' + JS_HOOK + '=' + BASE_CLASS;\n\n/**\n * FlyoutMenu\n * @class\n * @classdesc Initializes new FlyoutMenu behavior.\n * Behaviors are functionality that can be shared between different pieces\n * of markup. They are not strictly atomic, though they likely are used\n * on atomic components.\n * As added JS behavior, this is added through HTML data-js-hook attributes.\n *\n * Structure is:\n * behavior_flyout-menu\n *   behavior_flyout-menu_trigger\n *   behavior_flyout-menu_content\n *     behavior_flyout-menu_trigger (optional)\n *\n * The second trigger is optional and may be used for a button in the content\n * area, which may obscure the first trigger.\n * The flyout can be triggered through a click of either trigger.\n * @param {HTMLElement} element - The DOM element to attach FlyoutMenu behavior.\n * @param {boolean} autoHideContent - Whether to add `hidden` attribute to\n *   content when it is collapsed.\n * @returns {FlyoutMenu} An instance.\n */\nfunction FlyoutMenu(element, autoHideContent = true) {\n  // Verify that the expected dom attributes are present.\n  const _dom = checkBehaviorDom(element, BASE_CLASS);\n  const _triggerDoms = _findTriggers(element);\n  const _contentDom = checkBehaviorDom(element, BASE_CLASS + '_content');\n\n  // Flyouts appear in one of four states.\n  let _state = 0;\n  const COLLAPSED = 0;\n  const COLLAPSING = 1;\n  const EXPANDING = 2;\n  const EXPANDED = 3;\n\n  let _transition;\n  let _expandTransitionMethod;\n  let _collapseTransitionMethod;\n\n  // Binded events.\n  // Needed to add and remove events to transitions.\n  const _collapseEndBinded = _collapseEnd.bind(this);\n  const _expandEndBinded = _expandEnd.bind(this);\n\n  /* If this menu appears in a data source,\n     this can be used to store the source.\n     Examples include the index in an Array,\n     a key in an Hash, or a node in a Tree. */\n  let _data;\n\n  // Whether this instance's behaviors are suspended or not.\n  let _suspended = true;\n\n  /* Event immediately preceeding mouseover is touchstart,\n     if that event's present we'll want to ignore mouseover\n     to avoid a mouseover and click immediately after each other. */\n  let _touchTriggered = false;\n\n  /**\n   * Iterate over dom tree and find FlyoutMenu triggers.\n   * We need to exclude the ones that are nested FlyoutMenus, since those\n   * will be managed by their own instance of this class.\n   * @param {HTMLElement} element - The DOM element to search for triggers within.\n   * @returns {Array} List of trigger DOM references within this FlyoutMenu.\n   */\n  function _findTriggers(element) {\n    const triggersList = [];\n    const triggers = element.querySelectorAll(`${SEL_PREFIX}_trigger]`);\n\n    let trigger;\n    let triggerParent;\n    let isSubTrigger;\n    // Iterate backwards ensuring that length is an UInt32.\n    for (let i = triggers.length >>> 0; i--; ) {\n      isSubTrigger = false;\n      trigger = triggers[i];\n      triggerParent = trigger.parentElement;\n      while (triggerParent !== element) {\n        if (\n          triggerParent.getAttribute(JS_HOOK) &&\n          triggerParent.getAttribute(JS_HOOK).split(' ').indexOf(BASE_CLASS) !==\n            -1\n        ) {\n          isSubTrigger = true;\n          triggerParent = element;\n        } else {\n          triggerParent = triggerParent.parentElement;\n        }\n      }\n\n      if (!isSubTrigger) {\n        triggersList.unshift(triggers[i]);\n      }\n    }\n\n    return triggersList;\n  }\n\n  /**\n   * @returns {FlyoutMenu} An instance.\n   * @param {boolean} isExpanded - Whether the flyout menu is expanded at\n   *   initialization-time or collapsed.\n   */\n  function init(isExpanded = false) {\n    _state = isExpanded ? EXPANDED : COLLAPSED;\n    _triggerDoms.forEach((triggerDom) => {\n      _setAriaAttr('expanded', triggerDom, isExpanded);\n\n      triggerDom.addEventListener('click', _handleTriggerClicked.bind(this));\n      triggerDom.addEventListener('touchstart', _handleTouchStart, {\n        passive: true,\n      });\n      triggerDom.addEventListener('mouseover', _handleTriggerOver.bind(this));\n      triggerDom.addEventListener('mouseout', _handleTriggerOut.bind(this));\n    });\n\n    _contentDom.setAttribute('data-open', isExpanded ? 'true' : 'false');\n    if (autoHideContent && !isExpanded) _contentDom.setAttribute('hidden', '');\n\n    resume();\n\n    return this;\n  }\n\n  /**\n   * Set an aria attribute on an HTML element.\n   * @param {string} type - The aria attribute to set\n   *   (without the aria- prefix).\n   * @param {HTMLElement} elem - The element to set.\n   * @param {boolean} value - The value to set on `aria-expanded`,\n   *   casts to a string.\n   * @returns {string} The cast value.\n   */\n  function _setAriaAttr(type, elem, value) {\n    const strValue = String(value);\n    elem.setAttribute('aria-' + type, strValue);\n    return strValue;\n  }\n\n  /**\n   * Event handler for when the search input trigger is touched.\n   */\n  function _handleTouchStart() {\n    _touchTriggered = true;\n  }\n\n  /**\n   * Event handler for when the trigger is hovered over.\n   * @param {MouseEvent} event - The clicked flyout trigger event object.\n   */\n  function _handleTriggerOver(event) {\n    if (_suspended) return;\n\n    if (!_touchTriggered) {\n      this.dispatchEvent('triggerover', {\n        target: this,\n        trigger: event.target,\n        type: 'triggerover',\n      });\n    }\n\n    _touchTriggered = false;\n  }\n\n  /**\n   * Event handler for when the trigger is hovered out.\n   * @param {MouseEvent} event - The clicked flyout trigger event object.\n   */\n  function _handleTriggerOut(event) {\n    if (_suspended) return;\n\n    this.dispatchEvent('triggerout', {\n      target: this,\n      trigger: event.target,\n      type: 'triggerout',\n    });\n  }\n\n  /**\n   * Event handler for when the search input trigger is clicked,\n   * which opens/closes the search input.\n   * @param {MouseEvent} event - The clicked flyout trigger event object.\n   */\n  function _handleTriggerClicked(event) {\n    if (_suspended) return;\n\n    this.dispatchEvent('triggerclick', {\n      target: this,\n      trigger: event.target,\n      type: 'triggerclick',\n    });\n\n    event.preventDefault();\n\n    switch (_state) {\n      case COLLAPSED:\n      case COLLAPSING:\n        this.expand();\n        break;\n      case EXPANDING:\n      case EXPANDED:\n        this.collapse();\n        break;\n    }\n  }\n\n  /**\n   * Open the search box.\n   * @returns {FlyoutMenu} An instance.\n   */\n  function expand() {\n    _transition?.halt();\n    if (_state === EXPANDING || _state === EXPANDED) return this;\n\n    _state = EXPANDING;\n    if (autoHideContent) _contentDom.removeAttribute('hidden');\n    this.dispatchEvent('expandbegin', { target: this, type: 'expandbegin' });\n\n    // Only use transitions if both expand and collapse are set.\n    if (!_expandTransitionMethod || !_collapseTransitionMethod) {\n      _expandEndBinded();\n      return this;\n    }\n\n    const hasTransition = _transition?.isAnimated();\n    if (hasTransition) {\n      _transition.addEventListener(BaseTransition.END_EVENT, _expandEndBinded);\n    }\n\n    _expandTransitionMethod();\n\n    if (!hasTransition) {\n      _expandEndBinded();\n    }\n\n    return this;\n  }\n\n  /**\n   * Close the search box.\n   * If collapse is called when expand animation is underway,\n   * save a deferred call to collapse, which is called when\n   * expand completes.\n   * @returns {FlyoutMenu} An instance.\n   */\n  function collapse() {\n    _transition?.halt();\n    if (_state === COLLAPSING || _state === COLLAPSED) return this;\n\n    for (let i = 0, len = _triggerDoms.length; i < len; i++) {\n      _setAriaAttr('expanded', _triggerDoms[i], false);\n    }\n\n    _contentDom.setAttribute('data-open', 'false');\n\n    _state = COLLAPSING;\n    this.dispatchEvent('collapsebegin', {\n      target: this,\n      type: 'collapsebegin',\n    });\n\n    // Only use transitions if both expand and collapse are set.\n    if (!_collapseTransitionMethod || !_expandTransitionMethod) {\n      _collapseEndBinded();\n      return this;\n    }\n\n    const hasTransition = _transition?.isAnimated();\n    if (hasTransition) {\n      _transition.addEventListener(\n        BaseTransition.END_EVENT,\n        _collapseEndBinded\n      );\n    }\n\n    _collapseTransitionMethod();\n\n    if (!hasTransition) {\n      _collapseEndBinded();\n    }\n\n    return this;\n  }\n\n  /**\n   * Expand animation has completed.\n   * Call deferred collapse function,\n   * if set (otherwise it will call a noop function).\n   */\n  function _expandEnd() {\n    _state = EXPANDED;\n    _contentDom.setAttribute('data-open', 'true');\n    if (_transition) {\n      _transition.removeEventListener(\n        BaseTransition.END_EVENT,\n        _expandEndBinded\n      );\n    }\n    this.dispatchEvent('expandend', { target: this, type: 'expandend' });\n\n    for (let i = 0, len = _triggerDoms.length; i < len; i++) {\n      _setAriaAttr('expanded', _triggerDoms[i], true);\n    }\n  }\n\n  /**\n   * Collapse animation has completed.\n   */\n  function _collapseEnd() {\n    _state = COLLAPSED;\n\n    if (autoHideContent) _contentDom.setAttribute('hidden', '');\n\n    if (_transition) {\n      _transition.removeEventListener(\n        BaseTransition.END_EVENT,\n        _collapseEndBinded\n      );\n    }\n\n    this.dispatchEvent('collapseend', { target: this, type: 'collapseend' });\n  }\n\n  /**\n   * Set the transition that runs when this flyout is expanded/collapsed.\n   * @param {BaseTransition} transition - A transition object.\n   * @param {Function} collapseMethod - The collapse method to call on the transition.\n   * @param {Function} expandMethod - The expand method to call on the transition.\n   */\n  function setTransition(transition, collapseMethod, expandMethod) {\n    _transition = transition;\n\n    if (collapseMethod && collapseMethod !== _collapseTransitionMethod) {\n      _collapseTransitionMethod = collapseMethod;\n    }\n\n    if (expandMethod && expandMethod !== _expandTransitionMethod) {\n      _expandTransitionMethod = expandMethod;\n    }\n  }\n\n  /**\n   * Clear the transitions attached to this FlyoutMenu instance.\n   */\n  function clearTransition() {\n    if (_transition) {\n      _transition.remove();\n    }\n\n    let UNDEFINED;\n\n    _transition = UNDEFINED;\n\n    _expandTransitionMethod = UNDEFINED;\n    _collapseTransitionMethod = UNDEFINED;\n  }\n\n  /**\n   * @returns {object}\n   *   Hash of container, content DOM references, and a list of trigger DOMs.\n   */\n  function getDom() {\n    return {\n      container: _dom,\n      content: _contentDom,\n      trigger: _triggerDoms,\n    };\n  }\n\n  /**\n   * Enable broadcasting of trigger events.\n   * @returns {boolean} True if resumed, false otherwise.\n   */\n  function resume() {\n    if (_suspended) _suspended = false;\n\n    return !_suspended;\n  }\n\n  /**\n   * Suspend broadcasting of trigger events.\n   * @returns {boolean} True if suspended, false otherwise.\n   */\n  function suspend() {\n    if (!_suspended) _suspended = true;\n\n    return _suspended;\n  }\n\n  /**\n   * @param {number | string | object} data - A data identifier\n   *   such as an Array index, Hash key, or Tree node.\n   * @returns {FlyoutMenu} An instance.\n   */\n  function setData(data) {\n    _data = data;\n\n    return this;\n  }\n\n  // Attach public events.\n  const eventObserver = new EventObserver();\n  this.addEventListener = eventObserver.addEventListener;\n  this.removeEventListener = eventObserver.removeEventListener;\n  this.dispatchEvent = eventObserver.dispatchEvent;\n\n  this.init = init;\n  this.expand = expand;\n  this.collapse = collapse;\n  this.setTransition = setTransition;\n  this.clearTransition = clearTransition;\n  this.getData = () => _data;\n  this.getTransition = () => _transition;\n  this.getDom = getDom;\n  this.isAnimating = () => _state === EXPANDING || _state === COLLAPSING;\n  this.isExpanded = () => _state === EXPANDED;\n  this.resume = resume;\n  this.setData = setData;\n  this.suspend = suspend;\n\n  // Public static properties.\n  FlyoutMenu.BASE_CLASS = BASE_CLASS;\n\n  return this;\n}\n\nexport { FlyoutMenu };\n","/**\n * BaseTransition\n * @class\n * @classdesc Initializes new BaseTransition behavior.\n *   This shouldn't be used directly, but instead should be\n *   the base class used through composition by a specific transition.\n * @param {HTMLElement} element - DOM element to apply transition to.\n * @param {object} classes - The classes to apply to this transition.\n * @param {object} child - The child transition using this as a base.\n * @returns {BaseTransition} An instance.\n */\nfunction BaseTransition(element, classes, child) {\n  const _classes = classes;\n  let _dom = element;\n  if (!child) throw new Error('Child transition argument must be defined!');\n  const _child = child;\n\n  let _lastClass;\n  let _transitionEndEvent;\n  let _transitionCompleteBinded;\n\n  let _isAnimated = false;\n  let _isAnimating = false;\n  let _isFlushed = false;\n\n  // Make sure required attributes are passed in.\n  if (\n    typeof _classes.CSS_PROPERTY === 'undefined' ||\n    typeof _classes.BASE_CLASS === 'undefined'\n  ) {\n    throw new Error(\n      'Transitions require CSS_PROPERTY and BASE_CLASS ' +\n        'to be passed into BaseTransition.'\n    );\n  }\n\n  /**\n   * Add an event listener to the transition, or call the transition\n   * complete handler immediately if the transition is not supported.\n   */\n  function _addEventListener() {\n    /*\n      If transition is supported and the animation is animated,\n      listen for transition end event, otherwise call the handler directly.\n      Some browsers (e.g. IE9/OperaMini) do not support transitionend event.\n      If \"transition-duration: 0s\" is set, transitionEnd event will not\n      fire, so we need to call the handler straight away.\n    */\n    if (_transitionEndEvent && _isAnimated) {\n      _dom.addEventListener(_transitionEndEvent, _transitionCompleteBinded);\n      _child.dispatchEvent(BaseTransition.BEGIN_EVENT, {\n        target: _child,\n        type: BaseTransition.BEGIN_EVENT,\n      });\n\n      _dom.classList.add(BaseTransition.ANIMATING_CLASS);\n      _isAnimating = true;\n    } else {\n      _child.dispatchEvent(BaseTransition.BEGIN_EVENT, {\n        target: _child,\n        type: BaseTransition.BEGIN_EVENT,\n      });\n      _transitionCompleteBinded();\n    }\n  }\n\n  /**\n   * Remove an event listener to the transition.\n   */\n  function _removeEventListener() {\n    _dom.removeEventListener(_transitionEndEvent, _transitionCompleteBinded);\n  }\n\n  /**\n   * Handle the end of a transition.\n   * @param {TransitionEvent} evt - Transition event object.\n   * @returns {boolean} True if transition was cleaned up,\n   *   false if an outside transitioning property triggered this event handler.\n   */\n  function _transitionComplete(evt) {\n    if (evt && evt.propertyName !== _classes.CSS_PROPERTY) {\n      return false;\n    }\n\n    _removeEventListener();\n    _dom.classList.remove(BaseTransition.ANIMATING_CLASS);\n    _child.dispatchEvent(BaseTransition.END_EVENT, {\n      target: _child,\n      type: BaseTransition.END_EVENT,\n    });\n    _isAnimating = false;\n    return true;\n  }\n\n  /**\n   * Search for and remove initial BaseTransition classes that have\n   * already been applied to this BaseTransition's target element.\n   */\n  function _flush() {\n    let prop;\n    for (prop in _classes) {\n      if (\n        {}.hasOwnProperty.call(_classes, prop) &&\n        _classes[prop] !== _classes.BASE_CLASS &&\n        _dom.classList.contains(_classes[prop])\n      ) {\n        _dom.classList.remove(_classes[prop]);\n      }\n    }\n  }\n\n  /**\n   * Halt an in-progress animation and call the complete event immediately.\n   */\n  function halt() {\n    if (!_isAnimating) {\n      return;\n    }\n    _dom.style.webkitTransitionDuration = '0';\n    _dom.style.mozTransitionDuration = '0';\n    _dom.style.oTransitionDuration = '0';\n    _dom.style.transitionDuration = '0';\n    _dom.removeEventListener(_transitionEndEvent, _transitionCompleteBinded);\n    _transitionCompleteBinded();\n    _dom.style.webkitTransitionDuration = '';\n    _dom.style.mozTransitionDuration = '';\n    _dom.style.oTransitionDuration = '';\n    _dom.style.transitionDuration = '';\n  }\n\n  /**\n   * Remove all transition classes, if transition is initialized.\n   */\n  function remove() {\n    halt();\n    _flush();\n    _dom.classList.remove(_classes.BASE_CLASS);\n  }\n\n  /**\n   * Add a \"transition-duration: 0s\" utility CSS class.\n   */\n  function animateOn() {\n    _dom.classList.remove(BaseTransition.NO_ANIMATION_CLASS);\n    _isAnimated = true;\n  }\n\n  /**\n   * Remove a \"transition-duration: 0s\" utility CSS class.\n   */\n  function animateOff() {\n    _dom.classList.add(BaseTransition.NO_ANIMATION_CLASS);\n    _isAnimated = false;\n  }\n\n  /**\n   * @param {HTMLElement} elem - The element to check\n   *   for support of transition end event.\n   * @returns {string} The browser-prefixed transition end event.\n   */\n  function _getTransitionEndEvent(elem) {\n    if (!elem) {\n      const msg = 'Element does not have TransitionEnd event. It may be null!';\n      throw new Error(msg);\n    }\n\n    let transition;\n    const transitions = {\n      WebkitTransition: 'webkitTransitionEnd',\n      MozTransition: 'transitionend',\n      OTransition: 'oTransitionEnd otransitionend',\n      transition: 'transitionend',\n    };\n\n    let transitionEvent;\n    for (transitionEvent in transitions) {\n      if (\n        {}.hasOwnProperty.call(transitions, transitionEvent) &&\n        typeof elem.style[transitionEvent] !== 'undefined'\n      ) {\n        transition = transitions[transitionEvent];\n        break;\n      }\n    }\n    return transition;\n  }\n\n  /**\n   * Set the HTML element target of this transition.\n   * @param {HTMLElement} targetElement - The target of the transition.\n   */\n  function setElement(targetElement) {\n    // Clear the transition classes from the old element.\n    remove();\n    animateOn();\n\n    _dom = targetElement;\n    _dom.classList.add(_classes.BASE_CLASS);\n    _transitionEndEvent = _getTransitionEndEvent(_dom);\n  }\n\n  /**\n   * @param {Function} initialClass - The initial state for this transition.\n   * @returns {BaseTransition} An instance.\n   */\n  function init(initialClass) {\n    _isAnimated = !_dom.classList.contains(BaseTransition.NO_ANIMATION_CLASS);\n    _transitionCompleteBinded = _transitionComplete.bind(this);\n    setElement(_dom);\n    if (!initialClass) {\n      throw new Error(\n        'Transition needs to be passed an initial CSS class on initialization!'\n      );\n    }\n    _dom.classList.add(initialClass);\n\n    return this;\n  }\n\n  /**\n   * @param {string} className - A CSS class.\n   * @returns {boolean} False if the class is already applied,\n   *   otherwise true if the class was applied.\n   */\n  function applyClass(className) {\n    if (!_isFlushed) {\n      _flush();\n      _isFlushed = true;\n    }\n\n    if (_dom.classList.contains(className)) {\n      return false;\n    }\n\n    _removeEventListener();\n    _dom.classList.remove(_lastClass);\n    _lastClass = className;\n    _addEventListener();\n    _dom.classList.add(_lastClass);\n\n    return true;\n  }\n\n  // Attach public events.\n  this.animateOff = animateOff;\n  this.animateOn = animateOn;\n  this.applyClass = applyClass;\n  this.halt = halt;\n  this.init = init;\n  this.isAnimated = () => _isAnimated;\n  this.remove = remove;\n  this.setElement = setElement;\n\n  return this;\n}\n\n// Public static constants.\nBaseTransition.BEGIN_EVENT = 'transitionbegin';\nBaseTransition.END_EVENT = 'transitionend';\nBaseTransition.NO_ANIMATION_CLASS = 'u-no-animation';\nBaseTransition.ANIMATING_CLASS = 'u-is-animating';\n\nexport { BaseTransition };\n","import { BaseTransition, EventObserver } from '@cfpb/cfpb-atomic-component';\n\n// Exported constants.\nconst CLASSES = {\n  CSS_PROPERTY: 'max-height',\n  BASE_CLASS: 'u-max-height-transition',\n  MH_DEFAULT: 'u-max-height-default',\n  MH_SUMMARY: 'u-max-height-summary',\n  MH_ZERO: 'u-max-height-zero',\n};\n\n/**\n * MoveTransition\n * @class\n * @classdesc Initializes new MoveTransition behavior.\n * @param {HTMLElement} element - DOM element to apply transition to.\n * @returns {MaxHeightTransition} An instance.\n */\nfunction MaxHeightTransition(element) {\n  const eventObserver = new EventObserver();\n  const _baseTransition = new BaseTransition(element, CLASSES, this);\n  let _previousHeight = 0;\n\n  /**\n   * Refresh the max height set on the element.\n   * This may be useful if resizing the window and the content height changes.\n   */\n  function refresh() {\n    const elmHeight = element.scrollHeight;\n    const newHeight = elmHeight + 'px';\n    element.style.maxHeight = newHeight;\n  }\n\n  /**\n   * The whole page has loaded,\n   * including all dependent resources such as stylesheets and images.\n   */\n  function _pageLoaded() {\n    window.removeEventListener('load', _pageLoaded);\n    refresh();\n  }\n\n  /**\n   * @param {Function} initialClass - The initial state for this transition.\n   * @returns {MaxHeightTransition} An instance.\n   */\n  function init(initialClass) {\n    _baseTransition.init(initialClass);\n\n    /*\n    The scrollHeight of an element may be incorrect if the page hasn't\n    fully loaded yet, so we listen for that to happen before calculating\n    the element max-height.\n    */\n    window.addEventListener('load', _pageLoaded);\n\n    /*\n    The scrollHeight of an element may change on page load.\n    */\n    window.addEventListener('resize', () => {\n      refresh();\n    });\n\n    return this;\n  }\n\n  /**\n   * Reset the max-height to the default size.\n   * @returns {MaxHeightTransition} An instance.\n   */\n  function maxHeightDefault() {\n    refresh();\n    _baseTransition.applyClass(CLASSES.MH_DEFAULT);\n\n    if (!_previousHeight || element.scrollHeight > _previousHeight) {\n      _previousHeight = element.scrollHeight;\n    }\n\n    return this;\n  }\n\n  /**\n   * Collapses the max-height to just a summary height.\n   * @returns {MaxHeightTransition} An instance.\n   */\n  function maxHeightSummary() {\n    _baseTransition.applyClass(CLASSES.MH_SUMMARY);\n\n    _previousHeight = element.scrollHeight;\n\n    return this;\n  }\n\n  /**\n   * Collapses thte max-height completely.\n   * @returns {MaxHeightTransition} An instance.\n   */\n  function maxHeightZero() {\n    _baseTransition.applyClass(CLASSES.MH_ZERO);\n\n    _previousHeight = element.scrollHeight;\n\n    return this;\n  }\n\n  /**\n   * Remove style attribute.\n   * Remove all transition classes, if transition is initialized.\n   * @returns {boolean}\n   *   True, if the element's CSS classes were touched, false otherwise.\n   */\n  function remove() {\n    element.style.maxHeight = '';\n    return _baseTransition.remove();\n  }\n\n  // Attach public events.\n  this.addEventListener = eventObserver.addEventListener;\n  this.dispatchEvent = eventObserver.dispatchEvent;\n  this.removeEventListener = eventObserver.removeEventListener;\n\n  this.animateOff = _baseTransition.animateOff;\n  this.animateOn = _baseTransition.animateOn;\n  this.halt = _baseTransition.halt;\n  this.isAnimated = _baseTransition.isAnimated;\n  this.setElement = _baseTransition.setElement;\n  this.refresh = refresh;\n  this.remove = remove;\n\n  this.init = init;\n  this.maxHeightDefault = maxHeightDefault;\n  this.maxHeightSummary = maxHeightSummary;\n  this.maxHeightZero = maxHeightZero;\n\n  return this;\n}\n\n// Public static properties.\nMaxHeightTransition.CLASSES = CLASSES;\n\nexport { MaxHeightTransition };\n","/* ==========================================================================\n   Expandable Organism\n   ========================================================================== */\n\nimport {\n  add as addDataHook,\n  checkDom,\n  setInitFlag,\n  instantiateAll,\n  MaxHeightTransition,\n  EventObserver,\n  FlyoutMenu,\n} from '@cfpb/cfpb-atomic-component';\n\nconst BASE_CLASS = 'o-expandable';\n\n/**\n * Expandable\n * @class\n * @classdesc Initializes a new Expandable molecule.\n * @param {HTMLElement} element - The DOM element within which to search\n *   for the molecule.\n * @returns {Expandable} An instance.\n */\nfunction Expandable(element) {\n  // Internal vars.\n  const _dom = checkDom(element, BASE_CLASS);\n  let _targetDom;\n  let _contentDom;\n  let _labelDom;\n\n  // Animation vars.\n  let _transition;\n  let _flyout;\n\n  /**\n   * Set up and create the multiselect.\n   * @returns {Expandable} An instance.\n   */\n  function init() {\n    if (!setInitFlag(_dom)) {\n      return this;\n    }\n\n    _targetDom = _dom.querySelector(`.${BASE_CLASS}_header`);\n    _contentDom = _dom.querySelector(`.${BASE_CLASS}_content`);\n    _labelDom = _dom.querySelector(`.${BASE_CLASS}_label`);\n\n    const isExpanded = _dom.classList.contains(`${BASE_CLASS}__onload-open`);\n\n    // Add behavior hooks.\n    addDataHook(_dom, 'behavior_flyout-menu');\n    addDataHook(_targetDom, 'behavior_flyout-menu_trigger');\n    addDataHook(_contentDom, 'behavior_flyout-menu_content');\n\n    // If it's expanded we don't set an initial height,\n    // as it will be calculated internally.\n    const initialClass = isExpanded\n      ? MaxHeightTransition.CLASSES.MH_DEFAULT\n      : MaxHeightTransition.CLASSES.MH_ZERO;\n    _transition = new MaxHeightTransition(_contentDom).init(initialClass);\n\n    // Create root menu.\n    _flyout = new FlyoutMenu(_dom);\n\n    _flyout.setTransition(\n      _transition,\n      _transition.maxHeightZero,\n      _transition.maxHeightDefault\n    );\n\n    _flyout.init(isExpanded);\n\n    // Add events.\n    _flyout.addEventListener('expandbegin', () => {\n      _contentDom.classList.remove('u-hidden');\n      this.dispatchEvent('expandbegin', { target: this });\n    });\n    _flyout.addEventListener('collapseend', () => {\n      _contentDom.classList.add('u-hidden');\n    });\n\n    return this;\n  }\n\n  /**\n   * @returns {string} The expandable label text.\n   */\n  function getLabelText() {\n    return _labelDom.textContent.trim();\n  }\n\n  // Attach public events.\n  this.init = init;\n  this.expand = () => _flyout.expand();\n  this.collapse = () => _flyout.collapse();\n  this.isExpanded = () => _flyout.isExpanded();\n  this.refresh = () => _flyout.getTransition().refresh();\n  this.getLabelText = getLabelText;\n\n  const eventObserver = new EventObserver();\n  this.addEventListener = eventObserver.addEventListener;\n  this.removeEventListener = eventObserver.removeEventListener;\n  this.dispatchEvent = eventObserver.dispatchEvent;\n\n  return this;\n}\n\nExpandable.BASE_CLASS = BASE_CLASS;\nExpandable.init = (scope) =>\n  instantiateAll(`.${Expandable.BASE_CLASS}`, Expandable, scope);\n\nexport { Expandable };\n"],"names":["JS_HOOK","BEHAVIOR_PREFIX","STATE_PREFIX","EventObserver","_events","addEventListener","event","callback","removeEventListener","index","dispatchEvent","options","evts","i","len","contains","element","value","values","add","msg","INIT_FLAG","_verifyElementExists","baseClass","_verifyClassExists","dom","checkDom","setInitFlag","instantiateAll","selector","Constructor","scope","elements","insts","inst","checkBehaviorDom","behaviorDataAttr","BASE_CLASS","SEL_PREFIX","FlyoutMenu","autoHideContent","_dom","_triggerDoms","_findTriggers","_contentDom","_state","COLLAPSED","COLLAPSING","EXPANDING","EXPANDED","_transition","_expandTransitionMethod","_collapseTransitionMethod","_collapseEndBinded","_collapseEnd","_expandEndBinded","_expandEnd","_data","_suspended","_touchTriggered","triggersList","triggers","trigger","triggerParent","isSubTrigger","init","isExpanded","triggerDom","_setAriaAttr","_handleTriggerClicked","_handleTouchStart","_handleTriggerOver","_handleTriggerOut","resume","type","elem","strValue","expand","hasTransition","BaseTransition","collapse","setTransition","transition","collapseMethod","expandMethod","clearTransition","UNDEFINED","getDom","suspend","setData","data","eventObserver","classes","child","_classes","_child","_lastClass","_transitionEndEvent","_transitionCompleteBinded","_isAnimated","_isAnimating","_isFlushed","_addEventListener","_removeEventListener","_transitionComplete","evt","_flush","prop","halt","remove","animateOn","animateOff","_getTransitionEndEvent","transitions","transitionEvent","setElement","targetElement","initialClass","applyClass","className","CLASSES","MaxHeightTransition","_baseTransition","_previousHeight","refresh","newHeight","_pageLoaded","maxHeightDefault","maxHeightSummary","maxHeightZero","Expandable","_targetDom","_labelDom","_flyout","addDataHook","getLabelText"],"mappings":"6IAOA,MAAMA,EAAU,eAiBVC,GAAkB,YAelBC,GAAe,SChCrB,SAASC,GAAgB,CAEvB,MAAMC,EAAU,CAAA,EAQhB,SAASC,EAAiBC,EAAOC,EAAU,CACzC,MAAI,CAAE,EAAC,eAAe,KAAKH,EAASE,CAAK,EACvCF,EAAQE,GAAO,KAAKC,CAAQ,EAE5BH,EAAQE,GAAS,CAACC,CAAQ,EAGrB,IACR,CASD,SAASC,EAAoBF,EAAOC,EAAU,CAC5C,GAAI,CAAC,CAAE,EAAC,eAAe,KAAKH,EAASE,CAAK,EACxC,OAAO,KAGT,MAAMG,EAAQL,EAAQE,GAAO,QAAQC,CAAQ,EAE7C,OAAIE,IAAU,IACZL,EAAQE,GAAO,OAAOG,EAAO,CAAC,EAGzB,IACR,CAQD,SAASC,EAAcJ,EAAOK,EAAS,CACrC,GAAI,CAAC,CAAE,EAAC,eAAe,KAAKP,EAASE,CAAK,EACxC,OAAO,KAGTK,EAAUA,GAAW,GAErB,MAAMC,EAAOR,EAAQE,GACrB,QAASO,EAAI,EAAGC,EAAMF,EAAK,OAAQC,EAAIC,EAAKD,IAC1CD,EAAKC,GAAG,KAAK,KAAMF,CAAO,EAG5B,OAAO,IACR,CAED,YAAK,iBAAmBN,EACxB,KAAK,oBAAsBG,EAC3B,KAAK,cAAgBE,EACrB,KAAK,oBAAsB,IAAMN,EAE1B,IACT,CCpEA,SAASW,EAASC,EAASC,EAAO,CAChC,GAAI,CAACD,EACH,MAAO,GAET,IAAIE,EAASF,EAAQ,aAAahB,CAAO,EAEzC,OAAKkB,GAGLA,EAASA,EAAO,MAAM,GAAG,EAElBA,EAAO,QAAQD,CAAK,EAAI,IAJtB,EAKX,CASA,SAASE,EAAIH,EAASC,EAAO,CAC3B,GAAIF,EAASC,EAASC,CAAK,EAAG,OAAOA,EAErC,GAAIA,EAAM,QAAQ,GAAG,IAAM,GAAI,CAC7B,MAAMG,EAAMpB,EAAU,iCACtB,MAAM,IAAI,MAAMoB,CAAG,CACpB,CAED,MAAMF,EAASF,EAAQ,aAAahB,CAAO,EAC3C,OAAIkB,IAAW,OACbD,EAAQC,EAAS,IAAMD,GAEzBD,EAAQ,aAAahB,EAASiB,CAAK,EAE5BA,CACT,CCpBA,MAAMI,EAAYnB,GAAe,cASjC,SAASoB,GAAqBN,EAASO,EAAW,CAChD,GAAI,CAACP,GAAW,CAACA,EAAQ,UAAW,CAClC,MAAMI,EACJJ,EACA,+DAEAO,EACA,IACF,MAAM,IAAI,MAAMH,CAAG,CACpB,CAED,OAAOJ,CACT,CASA,SAASQ,GAAmBR,EAASO,EAAW,CAC9C,MAAME,EAAMT,EAAQ,UAAU,SAASO,CAAS,EAC5CP,EACAA,EAAQ,cAAc,IAAMO,CAAS,EACzC,GAAI,CAACE,EAAK,CACR,MAAML,EAAMG,EAAY,uCACxB,MAAM,IAAI,MAAMH,CAAG,CACpB,CAED,OAAOK,CACT,CAYA,SAASC,GAASV,EAASO,EAAW,CACpC,OAAAD,GAAqBN,EAASO,CAAS,EAC3BC,GAAmBR,EAASO,CAAS,CAGnD,CAUA,SAASI,GAAYX,EAAS,CAC5B,OAAID,EAASC,EAASK,CAAS,EACtB,IAGTF,EAAIH,EAASK,CAAS,EAEf,GACT,CASA,SAASO,GAAeC,EAAUC,EAAaC,EAAO,CAEpD,MAAMC,GADOD,GAAS,UACA,iBAAiBF,CAAQ,EACzCI,EAAQ,CAAA,EACd,IAAIC,EACAlB,EACJ,QAASH,EAAI,EAAGC,EAAMkB,EAAS,OAAQnB,EAAIC,EAAKD,IAC9CG,EAAUgB,EAASnB,GACfE,EAASC,EAASK,CAAS,IAAM,KACnCa,EAAO,IAAIJ,EAAYd,CAAO,EAC9BkB,EAAK,KAAI,EACTD,EAAM,KAAKC,CAAI,GAGnB,OAAOD,CACT,CC5BA,SAASE,EAAiBnB,EAASoB,EAAkB,CAEnD,IAAIX,EAEJ,GAAIV,EAASC,EAASoB,CAAgB,EACpC,OAAAX,EAAMT,EACCS,EAKT,GAAIT,EAAS,CACX,MAAMa,EAAW,IAAM7B,EAAU,IAAMoC,EAAmB,IAC1DX,EAAMT,EAAQ,cAAca,CAAQ,CACrC,CAED,GAAI,CAACJ,EAAK,CACR,MAAML,EAAMgB,EAAmB,0CAC/B,MAAM,IAAI,MAAMhB,CAAG,CACpB,CAED,OAAOK,CACT,CC3GA,MAAMY,EAAapC,GAAkB,cAC/BqC,GAAa,IAAMtC,EAAU,IAAMqC,EAyBzC,SAASE,GAAWvB,EAASwB,EAAkB,GAAM,CAEnD,MAAMC,EAAON,EAAiBnB,EAASqB,CAAU,EAC3CK,EAAeC,EAAc3B,CAAO,EACpC4B,EAAcT,EAAiBnB,EAASqB,EAAa,UAAU,EAGrE,IAAIQ,EAAS,EACb,MAAMC,EAAY,EACZC,EAAa,EACbC,EAAY,EACZC,EAAW,EAEjB,IAAIC,EACAC,EACAC,EAIJ,MAAMC,EAAqBC,EAAa,KAAK,IAAI,EAC3CC,EAAmBC,EAAW,KAAK,IAAI,EAM7C,IAAIC,EAGAC,EAAa,GAKbC,EAAkB,GAStB,SAAShB,EAAc3B,EAAS,CAC9B,MAAM4C,EAAe,CAAA,EACfC,EAAW7C,EAAQ,iBAAiB,GAAGsB,aAAqB,EAElE,IAAIwB,EACAC,EACAC,EAEJ,QAASnD,EAAIgD,EAAS,SAAW,EAAGhD,KAAO,CAIzC,IAHAmD,EAAe,GACfF,EAAUD,EAAShD,GACnBkD,EAAgBD,EAAQ,cACjBC,IAAkB/C,GAErB+C,EAAc,aAAa/D,CAAO,GAClC+D,EAAc,aAAa/D,CAAO,EAAE,MAAM,GAAG,EAAE,QAAQqC,CAAU,IAC/D,IAEF2B,EAAe,GACfD,EAAgB/C,GAEhB+C,EAAgBA,EAAc,cAI7BC,GACHJ,EAAa,QAAQC,EAAShD,EAAE,CAEnC,CAED,OAAO+C,CACR,CAOD,SAASK,EAAKC,EAAa,GAAO,CAChC,OAAArB,EAASqB,EAAajB,EAAWH,EACjCJ,EAAa,QAASyB,GAAe,CACnCC,EAAa,WAAYD,EAAYD,CAAU,EAE/CC,EAAW,iBAAiB,QAASE,EAAsB,KAAK,IAAI,CAAC,EACrEF,EAAW,iBAAiB,aAAcG,EAAmB,CAC3D,QAAS,EACjB,CAAO,EACDH,EAAW,iBAAiB,YAAaI,EAAmB,KAAK,IAAI,CAAC,EACtEJ,EAAW,iBAAiB,WAAYK,EAAkB,KAAK,IAAI,CAAC,CAC1E,CAAK,EAED5B,EAAY,aAAa,YAAasB,EAAa,OAAS,OAAO,EAC/D1B,GAAmB,CAAC0B,GAAYtB,EAAY,aAAa,SAAU,EAAE,EAEzE6B,IAEO,IACR,CAWD,SAASL,EAAaM,EAAMC,EAAM1D,EAAO,CACvC,MAAM2D,EAAW,OAAO3D,CAAK,EAC7B,OAAA0D,EAAK,aAAa,QAAUD,EAAME,CAAQ,EACnCA,CACR,CAKD,SAASN,GAAoB,CAC3BX,EAAkB,EACnB,CAMD,SAASY,EAAmBjE,EAAO,CAC7BoD,IAECC,GACH,KAAK,cAAc,cAAe,CAChC,OAAQ,KACR,QAASrD,EAAM,OACf,KAAM,aACd,CAAO,EAGHqD,EAAkB,GACnB,CAMD,SAASa,EAAkBlE,EAAO,CAC5BoD,GAEJ,KAAK,cAAc,aAAc,CAC/B,OAAQ,KACR,QAASpD,EAAM,OACf,KAAM,YACZ,CAAK,CACF,CAOD,SAAS+D,EAAsB/D,EAAO,CACpC,GAAI,CAAAoD,EAUJ,OARA,KAAK,cAAc,eAAgB,CACjC,OAAQ,KACR,QAASpD,EAAM,OACf,KAAM,cACZ,CAAK,EAEDA,EAAM,eAAc,EAEZuC,EAAM,CACZ,KAAKC,EACL,KAAKC,EACH,KAAK,OAAM,EACX,MACF,KAAKC,EACL,KAAKC,EACH,KAAK,SAAQ,EACb,KACH,CACF,CAMD,SAAS4B,GAAS,CAEhB,GADA3B,GAAA,MAAAA,EAAa,OACTL,IAAWG,GAAaH,IAAWI,EAAU,OAAO,KAOxD,GALAJ,EAASG,EACLR,GAAiBI,EAAY,gBAAgB,QAAQ,EACzD,KAAK,cAAc,cAAe,CAAE,OAAQ,KAAM,KAAM,aAAa,CAAE,EAGnE,CAACO,GAA2B,CAACC,EAC/B,OAAAG,IACO,KAGT,MAAMuB,EAAgB5B,GAAA,YAAAA,EAAa,aACnC,OAAI4B,GACF5B,EAAY,iBAAiB6B,EAAe,UAAWxB,CAAgB,EAGzEJ,IAEK2B,GACHvB,IAGK,IACR,CASD,SAASyB,GAAW,CAElB,GADA9B,GAAA,MAAAA,EAAa,OACTL,IAAWE,GAAcF,IAAWC,EAAW,OAAO,KAE1D,QAASjC,EAAI,EAAGC,EAAM4B,EAAa,OAAQ7B,EAAIC,EAAKD,IAClDuD,EAAa,WAAY1B,EAAa7B,GAAI,EAAK,EAYjD,GATA+B,EAAY,aAAa,YAAa,OAAO,EAE7CC,EAASE,EACT,KAAK,cAAc,gBAAiB,CAClC,OAAQ,KACR,KAAM,eACZ,CAAK,EAGG,CAACK,GAA6B,CAACD,EACjC,OAAAE,IACO,KAGT,MAAMyB,EAAgB5B,GAAA,YAAAA,EAAa,aACnC,OAAI4B,GACF5B,EAAY,iBACV6B,EAAe,UACf1B,CACR,EAGID,IAEK0B,GACHzB,IAGK,IACR,CAOD,SAASG,GAAa,CACpBX,EAASI,EACTL,EAAY,aAAa,YAAa,MAAM,EACxCM,GACFA,EAAY,oBACV6B,EAAe,UACfxB,CACR,EAEI,KAAK,cAAc,YAAa,CAAE,OAAQ,KAAM,KAAM,WAAW,CAAE,EAEnE,QAAS1C,EAAI,EAAGC,EAAM4B,EAAa,OAAQ7B,EAAIC,EAAKD,IAClDuD,EAAa,WAAY1B,EAAa7B,GAAI,EAAI,CAEjD,CAKD,SAASyC,GAAe,CACtBT,EAASC,EAELN,GAAiBI,EAAY,aAAa,SAAU,EAAE,EAEtDM,GACFA,EAAY,oBACV6B,EAAe,UACf1B,CACR,EAGI,KAAK,cAAc,cAAe,CAAE,OAAQ,KAAM,KAAM,aAAa,CAAE,CACxE,CAQD,SAAS4B,GAAcC,EAAYC,EAAgBC,EAAc,CAC/DlC,EAAcgC,EAEVC,GAAkBA,IAAmB/B,IACvCA,EAA4B+B,GAG1BC,GAAgBA,IAAiBjC,IACnCA,EAA0BiC,EAE7B,CAKD,SAASC,IAAkB,CACrBnC,GACFA,EAAY,OAAM,EAGpB,IAAIoC,EAEJpC,EAAcoC,EAEdnC,EAA0BmC,EAC1BlC,EAA4BkC,CAC7B,CAMD,SAASC,IAAS,CAChB,MAAO,CACL,UAAW9C,EACX,QAASG,EACT,QAASF,CACf,CACG,CAMD,SAAS+B,GAAS,CAChB,OAAIf,IAAYA,EAAa,IAEtB,CAACA,CACT,CAMD,SAAS8B,IAAU,CACjB,OAAK9B,IAAYA,EAAa,IAEvBA,CACR,CAOD,SAAS+B,GAAQC,EAAM,CACrB,OAAAjC,EAAQiC,EAED,IACR,CAGD,MAAMC,EAAgB,IAAIxF,EAC1B,YAAK,iBAAmBwF,EAAc,iBACtC,KAAK,oBAAsBA,EAAc,oBACzC,KAAK,cAAgBA,EAAc,cAEnC,KAAK,KAAO1B,EACZ,KAAK,OAASY,EACd,KAAK,SAAWG,EAChB,KAAK,cAAgBC,GACrB,KAAK,gBAAkBI,GACvB,KAAK,QAAU,IAAM5B,EACrB,KAAK,cAAgB,IAAMP,EAC3B,KAAK,OAASqC,GACd,KAAK,YAAc,IAAM1C,IAAWG,GAAaH,IAAWE,EAC5D,KAAK,WAAa,IAAMF,IAAWI,EACnC,KAAK,OAASwB,EACd,KAAK,QAAUgB,GACf,KAAK,QAAUD,GAGfjD,GAAW,WAAaF,EAEjB,IACT,CC1aA,SAAS0C,EAAe/D,EAAS4E,EAASC,EAAO,CAC/C,MAAMC,EAAWF,EACjB,IAAInD,EAAOzB,EACX,GAAI,CAAC6E,EAAO,MAAM,IAAI,MAAM,4CAA4C,EACxE,MAAME,EAASF,EAEf,IAAIG,EACAC,EACAC,EAEAC,EAAc,GACdC,EAAe,GACfC,EAAa,GAGjB,GACE,OAAOP,EAAS,aAAiB,KACjC,OAAOA,EAAS,WAAe,IAE/B,MAAM,IAAI,MACR,mFAEN,EAOE,SAASQ,GAAoB,CAQvBL,GAAuBE,GACzB1D,EAAK,iBAAiBwD,EAAqBC,CAAyB,EACpEH,EAAO,cAAchB,EAAe,YAAa,CAC/C,OAAQgB,EACR,KAAMhB,EAAe,WAC7B,CAAO,EAEDtC,EAAK,UAAU,IAAIsC,EAAe,eAAe,EACjDqB,EAAe,KAEfL,EAAO,cAAchB,EAAe,YAAa,CAC/C,OAAQgB,EACR,KAAMhB,EAAe,WAC7B,CAAO,EACDmB,IAEH,CAKD,SAASK,GAAuB,CAC9B9D,EAAK,oBAAoBwD,EAAqBC,CAAyB,CACxE,CAQD,SAASM,EAAoBC,EAAK,CAChC,OAAIA,GAAOA,EAAI,eAAiBX,EAAS,aAChC,IAGTS,IACA9D,EAAK,UAAU,OAAOsC,EAAe,eAAe,EACpDgB,EAAO,cAAchB,EAAe,UAAW,CAC7C,OAAQgB,EACR,KAAMhB,EAAe,SAC3B,CAAK,EACDqB,EAAe,GACR,GACR,CAMD,SAASM,GAAS,CAChB,IAAIC,EACJ,IAAKA,KAAQb,GAET,CAAA,GAAG,eAAe,KAAKA,EAAUa,CAAI,GACrCb,EAASa,KAAUb,EAAS,YAC5BrD,EAAK,UAAU,SAASqD,EAASa,EAAK,GAEtClE,EAAK,UAAU,OAAOqD,EAASa,EAAK,CAGzC,CAKD,SAASC,GAAO,CACV,CAACR,IAGL3D,EAAK,MAAM,yBAA2B,IACtCA,EAAK,MAAM,sBAAwB,IACnCA,EAAK,MAAM,oBAAsB,IACjCA,EAAK,MAAM,mBAAqB,IAChCA,EAAK,oBAAoBwD,EAAqBC,CAAyB,EACvEA,IACAzD,EAAK,MAAM,yBAA2B,GACtCA,EAAK,MAAM,sBAAwB,GACnCA,EAAK,MAAM,oBAAsB,GACjCA,EAAK,MAAM,mBAAqB,GACjC,CAKD,SAASoE,GAAS,CAChBD,IACAF,IACAjE,EAAK,UAAU,OAAOqD,EAAS,UAAU,CAC1C,CAKD,SAASgB,GAAY,CACnBrE,EAAK,UAAU,OAAOsC,EAAe,kBAAkB,EACvDoB,EAAc,EACf,CAKD,SAASY,GAAa,CACpBtE,EAAK,UAAU,IAAIsC,EAAe,kBAAkB,EACpDoB,EAAc,EACf,CAOD,SAASa,EAAuBrC,EAAM,CACpC,GAAI,CAACA,EAAM,CACT,MAAMvD,EAAM,6DACZ,MAAM,IAAI,MAAMA,CAAG,CACpB,CAED,IAAI8D,EACJ,MAAM+B,EAAc,CAClB,iBAAkB,sBAClB,cAAe,gBACf,YAAa,gCACb,WAAY,eAClB,EAEI,IAAIC,EACJ,IAAKA,KAAmBD,EACtB,GACE,CAAA,EAAG,eAAe,KAAKA,EAAaC,CAAe,GACnD,OAAOvC,EAAK,MAAMuC,GAAqB,IACvC,CACAhC,EAAa+B,EAAYC,GACzB,KACD,CAEH,OAAOhC,CACR,CAMD,SAASiC,EAAWC,EAAe,CAEjCP,IACAC,IAEArE,EAAO2E,EACP3E,EAAK,UAAU,IAAIqD,EAAS,UAAU,EACtCG,EAAsBe,EAAuBvE,CAAI,CAClD,CAMD,SAASwB,EAAKoD,EAAc,CAI1B,GAHAlB,EAAc,CAAC1D,EAAK,UAAU,SAASsC,EAAe,kBAAkB,EACxEmB,EAA4BM,EAAoB,KAAK,IAAI,EACzDW,EAAW1E,CAAI,EACX,CAAC4E,EACH,MAAM,IAAI,MACR,uEACR,EAEI,OAAA5E,EAAK,UAAU,IAAI4E,CAAY,EAExB,IACR,CAOD,SAASC,EAAWC,EAAW,CAM7B,OALKlB,IACHK,IACAL,EAAa,IAGX5D,EAAK,UAAU,SAAS8E,CAAS,EAC5B,IAGThB,IACA9D,EAAK,UAAU,OAAOuD,CAAU,EAChCA,EAAauB,EACbjB,IACA7D,EAAK,UAAU,IAAIuD,CAAU,EAEtB,GACR,CAGD,YAAK,WAAae,EAClB,KAAK,UAAYD,EACjB,KAAK,WAAaQ,EAClB,KAAK,KAAOV,EACZ,KAAK,KAAO3C,EACZ,KAAK,WAAa,IAAMkC,EACxB,KAAK,OAASU,EACd,KAAK,WAAaM,EAEX,IACT,CAGApC,EAAe,YAAc,kBAC7BA,EAAe,UAAY,gBAC3BA,EAAe,mBAAqB,iBACpCA,EAAe,gBAAkB,iBCjQjC,MAAMyC,EAAU,CACd,aAAc,aACd,WAAY,0BACZ,WAAY,uBACZ,WAAY,uBACZ,QAAS,mBACX,EASA,SAASC,EAAoBzG,EAAS,CACpC,MAAM2E,EAAgB,IAAIxF,EACpBuH,EAAkB,IAAI3C,EAAe/D,EAASwG,EAAS,IAAI,EACjE,IAAIG,EAAkB,EAMtB,SAASC,GAAU,CAEjB,MAAMC,EADY7G,EAAQ,aACI,KAC9BA,EAAQ,MAAM,UAAY6G,CAC3B,CAMD,SAASC,GAAc,CACrB,OAAO,oBAAoB,OAAQA,CAAW,EAC9CF,GACD,CAMD,SAAS3D,EAAKoD,EAAc,CAC1B,OAAAK,EAAgB,KAAKL,CAAY,EAOjC,OAAO,iBAAiB,OAAQS,CAAW,EAK3C,OAAO,iBAAiB,SAAU,IAAM,CACtCF,GACN,CAAK,EAEM,IACR,CAMD,SAASG,GAAmB,CAC1B,OAAAH,IACAF,EAAgB,WAAWF,EAAQ,UAAU,GAEzC,CAACG,GAAmB3G,EAAQ,aAAe2G,KAC7CA,EAAkB3G,EAAQ,cAGrB,IACR,CAMD,SAASgH,GAAmB,CAC1B,OAAAN,EAAgB,WAAWF,EAAQ,UAAU,EAE7CG,EAAkB3G,EAAQ,aAEnB,IACR,CAMD,SAASiH,GAAgB,CACvB,OAAAP,EAAgB,WAAWF,EAAQ,OAAO,EAE1CG,EAAkB3G,EAAQ,aAEnB,IACR,CAQD,SAAS6F,GAAS,CAChB,OAAA7F,EAAQ,MAAM,UAAY,GACnB0G,EAAgB,QACxB,CAGD,YAAK,iBAAmB/B,EAAc,iBACtC,KAAK,cAAgBA,EAAc,cACnC,KAAK,oBAAsBA,EAAc,oBAEzC,KAAK,WAAa+B,EAAgB,WAClC,KAAK,UAAYA,EAAgB,UACjC,KAAK,KAAOA,EAAgB,KAC5B,KAAK,WAAaA,EAAgB,WAClC,KAAK,WAAaA,EAAgB,WAClC,KAAK,QAAUE,EACf,KAAK,OAASf,EAEd,KAAK,KAAO5C,EACZ,KAAK,iBAAmB8D,EACxB,KAAK,iBAAmBC,EACxB,KAAK,cAAgBC,EAEd,IACT,CAGAR,EAAoB,QAAUD,EC5H9B,MAAMnF,EAAa,eAUnB,SAAS6F,EAAWlH,EAAS,CAE3B,MAAMyB,EAAOf,GAASV,EAASqB,CAAU,EACzC,IAAI8F,EACAvF,EACAwF,EAGAlF,EACAmF,EAMJ,SAASpE,GAAO,CACd,GAAI,CAACtC,GAAYc,CAAI,EACnB,OAAO,KAGT0F,EAAa1F,EAAK,cAAc,IAAIJ,UAAmB,EACvDO,EAAcH,EAAK,cAAc,IAAIJ,WAAoB,EACzD+F,EAAY3F,EAAK,cAAc,IAAIJ,SAAkB,EAErD,MAAM6B,EAAazB,EAAK,UAAU,SAAS,GAAGJ,gBAAyB,EAGvEiG,EAAY7F,EAAM,sBAAsB,EACxC6F,EAAYH,EAAY,8BAA8B,EACtDG,EAAY1F,EAAa,8BAA8B,EAIvD,MAAMyE,EAAenD,EACjBuD,EAAoB,QAAQ,WAC5BA,EAAoB,QAAQ,QAChC,OAAAvE,EAAc,IAAIuE,EAAoB7E,CAAW,EAAE,KAAKyE,CAAY,EAGpEgB,EAAU,IAAI9F,GAAWE,CAAI,EAE7B4F,EAAQ,cACNnF,EACAA,EAAY,cACZA,EAAY,gBAClB,EAEImF,EAAQ,KAAKnE,CAAU,EAGvBmE,EAAQ,iBAAiB,cAAe,IAAM,CAC5CzF,EAAY,UAAU,OAAO,UAAU,EACvC,KAAK,cAAc,cAAe,CAAE,OAAQ,IAAM,CAAA,CACxD,CAAK,EACDyF,EAAQ,iBAAiB,cAAe,IAAM,CAC5CzF,EAAY,UAAU,IAAI,UAAU,CAC1C,CAAK,EAEM,IACR,CAKD,SAAS2F,GAAe,CACtB,OAAOH,EAAU,YAAY,MAC9B,CAGD,KAAK,KAAOnE,EACZ,KAAK,OAAS,IAAMoE,EAAQ,OAAM,EAClC,KAAK,SAAW,IAAMA,EAAQ,SAAQ,EACtC,KAAK,WAAa,IAAMA,EAAQ,WAAU,EAC1C,KAAK,QAAU,IAAMA,EAAQ,cAAe,EAAC,QAAO,EACpD,KAAK,aAAeE,EAEpB,MAAM5C,EAAgB,IAAIxF,EAC1B,YAAK,iBAAmBwF,EAAc,iBACtC,KAAK,oBAAsBA,EAAc,oBACzC,KAAK,cAAgBA,EAAc,cAE5B,IACT,CAEAuC,EAAW,WAAa7F,EACxB6F,EAAW,KAAQnG,GACjBH,GAAe,IAAIsG,EAAW,aAAcA,EAAYnG,CAAK"}